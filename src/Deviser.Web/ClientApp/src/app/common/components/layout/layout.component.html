<div class="layout-container">
  <div class="container-fluid">
    <div class="row layout-header">
      <div class="col-2">
        <h3 class="layout-title">
          Layout Designer
        </h3>
      </div>
      <div class="col action-bar">
        <button type="button" class="layout-control btn btn-success">
          <i class="my-icon" aria-label="My icon" [inlineSVG]="'assets/icons/baseline-add.svg'| envPath"></i> New
        </button>
  
        <button type="button" class="layout-control btn btn-default">
          <i class="fa fa-clone" aria-hidden="true"></i> Copy
        </button>
  
        <button type="button" class="layout-control btn btn-default">
          <i class="fa fa-pencil" aria-hidden="true"></i> Change Layout Name
        </button>
  
        <div class="layout-name">
          <input type="text" class="form-control" placeholder="Enter layout name" />
        </div>
  
        <button type="button" class="layout-control btn btn-primary">
          <i class="fa fa-floppy-o" aria-hidden="true"></i> Save
        </button>
  
        <button type="button" class="layout-control btn btn-danger">
          <i class="fa fa-trash"></i> Delete
        </button>
  
        <div class="layout-dropdown">
          <ng-select id="ngslayouts" [items]="pageLayouts" bindLabel="name" [(ngModel)]="selectedLayout"
            (change)="onPageLayoutChange($event);" autofocus [selectOnTab]="true" [multiple]="false"
            placeholder="Select a Layout">
          </ng-select>
        </div>
      </div>
      <div class="col-2">
        <b> Page:</b> [CURRENT PAGE]
      </div>
    </div>
  
    <div class="row">
      <div class="col-2">
        <div class="card">
          <div class="card-header">
            <b>New Elements</b>
          </div>
          <div class="card-body" *ngIf="layoutTypes && layoutTypes.length > 0">
            <div #newElementList cdkDropList class="new-element-list"
              [cdkDropListConnectedTo]="nestedContainersDropListIds" [cdkDropListData]="layoutTypes">
              <div class="new-element node-element" *ngFor="let layoutType of layoutTypes" cdkDrag [cdkDragData]="layoutType" cdkDragBoundary=".layout-container">
                <div class="icon">
                  <i class="{{layoutType.iconClass}}" *ngIf="layoutType.iconClass"></i>
                  <img src="{{layoutType.iconImage}}" *ngIf="layoutType.iconImage" alt="{{layoutType.name}}" />
                </div>
                <div class="label">
                  {{layoutType.label}}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="container-element root">
          <div class="container-element-header">
            <b>Nested Containers</b>
          </div>
          <div class="container-element-body" *ngIf="root">
            <ng-container *ngTemplateOutlet="list, context:{node:root}">
            </ng-container>
          </div>
        </div>
      </div>
      <div class="col-2">
        <div class="card">
          <div class="card-header">
            <b>Trash</b>
          </div>
          <div class="card-body">
            <div id="trashList" cdkDropList class="trash-list" (cdkDropListDropped)="onDropToTrash($event)">
              <svg viewBox="0 0 24 24" width="24" height="24">
                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4z" />
              </svg>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <ng-template #list let-node="node">
    <div cdkDropList [id]="node.id" [cdkDropListConnectedTo]="trashDropListIds" [cdkDropListData]="node" [cdkDropListEnterPredicate]="elementDropPredicate"
      (cdkDropListDropped)="onDragDrop($event)" class="drop-list">
      <div *ngFor="let child of node.placeHolders;let i = index" cdkDrag [cdkDragData]="child" class="drop-item" cdkDragBoundary=".layout-container">        
        <ng-container *ngTemplateOutlet="templateSelector, context:{node:child, index:i}">
        </ng-container>
        <div class="item-placeholder" *cdkDragPlaceholder></div>
      </div>
    </div>
  </ng-template>
  
  <ng-template #templateSelector let-node="node" let-index="index">
    <div class="container-element">
      <div class="container-element-header">
        <b>{{getLayoutTypeName(node.layoutTypeId)}} {{index+1}}</b>
      </div>
      <div class="container-element-body">
        <ng-container *ngTemplateOutlet="list, context:{node:node}">
        </ng-container>
      </div>
    </div>
  </ng-template>
</div>
